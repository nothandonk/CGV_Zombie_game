<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Soweto Chronicles - A Journey of Resilience</title>
        <style>
            body,
            html {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                font-family: "Arial", sans-serif;
                background: #000;
                color: #fff;
                overflow-x: hidden;
            }

            .loading-screen {
                position: fixed;
                width: 100%;
                height: 100%;
                background: linear-gradient(to bottom, #000000, #1a1a1a);
                z-index: 1000;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                opacity: 0;
                transition: opacity 1s;
                pointer-events: none;
            }

            .loading-screen.active {
                opacity: 1;
                pointer-events: all;
            }

            .story-container {
                max-width: 800px;
                padding: 40px;
                text-align: center;
                background: rgba(26, 26, 26, 0.95);
                border-radius: 15px;
                border: 2px solid #ffd700;
                transform: translateY(20px);
                opacity: 0;
                transition: all 1s;
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.2);
            }

            .active .story-container {
                transform: translateY(0);
                opacity: 1;
            }

            .story-text {
                font-size: 1.2em;
                line-height: 1.8;
                margin: 20px 0;
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
                letter-spacing: 0.5px;
            }

            .story-text p {
                margin: 0;
                padding: 20px;
                background: rgba(0, 0, 0, 0.3);
                border-radius: 8px;
                border-left: 4px solid #c41e3a;
            }

            .loading-bar-container {
                width: 300px;
                height: 20px;
                background: rgba(255, 255, 255, 0.1);
                border: 2px solid #666;
                margin: 20px 0;
                position: relative;
                border-radius: 10px;
                overflow: hidden;
            }

            .loading-bar {
                width: 0%;
                height: 100%;
                background: linear-gradient(90deg, #c41e3a, #ffd700);
                transition: width 0.5s;
            }

            .loading-text {
                position: absolute;
                width: 100%;
                text-align: center;
                color: #fff;
                font-size: 14px;
                line-height: 20px;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            }

            .chapter-title {
                font-size: 2.8em;
                margin-bottom: 30px;
                text-transform: uppercase;
                letter-spacing: 3px;
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
                color: #ffd700;
                position: relative;
                display: inline-block;
            }

            .chapter-title::after {
                content: "";
                position: absolute;
                bottom: -10px;
                left: 50%;
                transform: translateX(-50%);
                width: 60%;
                height: 3px;
                background: linear-gradient(
                    90deg,
                    transparent,
                    #ffd700,
                    transparent
                );
            }

            #main-menu {
                position: fixed;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    rgba(0, 0, 0, 0.9),
                    rgba(0, 0, 0, 0.95)
                );
                display: none;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 2000;
            }

            .menu-container {
                text-align: center;
                padding: 60px;
                background: rgba(26, 26, 26, 0.95);
                border-radius: 20px;
                border: 3px solid #ffd700;
                box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
            }

            .menu-title {
                font-size: 3.5em;
                color: #ffd700;
                margin-bottom: 50px;
                text-transform: uppercase;
                letter-spacing: 5px;
                text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            }

            .start-button {
                padding: 20px 50px;
                font-size: 1.8em;
                background: linear-gradient(45deg, #c41e3a, #ffd700);
                border: none;
                border-radius: 35px;
                color: white;
                cursor: pointer;
                transition: all 0.3s ease;
                text-transform: uppercase;
                letter-spacing: 3px;
                margin: 15px;
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            }

            .start-button:hover {
                transform: scale(1.05);
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            }

            #loading-progress {
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                color: #fff;
                font-size: 16px;
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
            }

            #game-content {
                display: none;
            }

            .audio-controls {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 3000;
            }
        </style>
    </head>
    <body>
        <!-- Audio Controls -->
        <div class="audio-controls">
            <button
                onclick="toggleNarration()"
                class="start-button"
                style="padding: 10px 20px; font-size: 1em"
            >
                Toggle Narration
            </button>
        </div>

        <!-- Chapters 1-5 structure remains the same, just removed img elements -->
        <div id="chapter1" class="loading-screen active">
            <div class="story-container">
                <h1 class="chapter-title">Chapter 1: Birth and Beginnings</h1>
                <div class="story-text">
                    <p>
                        All began at Chris Hani Baragwanath Hospital. Known for
                        healing, it became ground zero for an unexpected
                        outbreak. Doctors fought bravely, unaware they were at
                        the dawn of a new era.
                    </p>
                </div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
                <div class="loading-text">Loading Chapter 1... 0%</div>
            </div>
        </div>

        <!-- Chapter 2: Chaos in Dobsonville -->
        <div id="chapter2" class="loading-screen">
            <div class="story-container">
                <h1 class="chapter-title">Chapter 2: Chaos in Dobsonville</h1>
                <div class="story-text">
                    <p>
                        As the infection spread, Dobsonville transformed. The
                        streets, once vibrant, now reverberated with cries and
                        confusion, marking the start of tumultuous times.
                    </p>
                </div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
                <div class="loading-text">Loading Chapter 2... 0%</div>
            </div>
        </div>

        <!-- Chapter 3: Gathering at the Soweto Towers -->
        <div id="chapter3" class="loading-screen">
            <div class="story-container">
                <h1 class="chapter-title">
                    Chapter 3: Gathering at the Soweto Towers
                </h1>
                <div class="story-text">
                    <p>
                        The Soweto Towers, symbols of art and history, became
                        beacons of unity. Communities strategized and
                        strengthened their bonds beneath these towering
                        structures.
                    </p>
                </div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
                <div class="loading-text">Loading Chapter 3... 0%</div>
            </div>
        </div>

        <!-- Chapter 4: The Spirit of Resistance -->
        <div id="chapter4" class="loading-screen">
            <div class="story-container">
                <h1 class="chapter-title">
                    Chapter 4: The Spirit of Resistance
                </h1>
                <div class="story-text">
                    <p>
                        Amid adversity, the cry "Vukuzenzele" sparked action.
                        Artists and fighters alike fortified defenses, embodying
                        the indomitable spirit of Soweto.
                    </p>
                </div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
                <div class="loading-text">Loading Chapter 4... 0%</div>
            </div>
        </div>

        <!-- Chapter 5: The Soldier's Duty -->
        <div id="chapter5" class="loading-screen">
            <div class="story-container">
                <h1 class="chapter-title">Chapter 5: The Soldier's Duty</h1>
                <div class="story-text">
                    <p>
                        Tshepo Mahlangu, SANDF special forces, stood firm. His
                        oath to protect echoed in his heart as he fought for the
                        spirit and survival of Soweto.
                    </p>
                </div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar"></div>
                <div class="loading-text">Loading Chapter 5... 0%</div>
            </div>
        </div>

        <!-- Repeat similar structure for chapters 2-5 -->
        <!-- Other chapters structure stays the same, just remove the img elements -->

        <!-- Main Menu -->
        <div id="main-menu">
            <div class="menu-container">
                <h1 class="menu-title">Soweto Chronicles</h1>
                <button class="start-button" onclick="startGame()">
                    Start Game
                </button>
            </div>
        </div>

        <div id="loading-progress">Loading game assets: 0%</div>

        <div id="game-content">
            <!-- Game content here -->
        </div>

        <script>
            let totalGameAssets = 0;
            let loadedGameAssets = 0;
            const loadingProgress = document.getElementById("loading-progress");

            function getCurrentChapter() {
                return Array.from(
                    document.querySelectorAll(".loading-screen"),
                ).findIndex((screen) => screen.classList.contains("active"));
            }

            function updateGameLoadingProgress(loaded, total) {
                totalGameAssets = total;
                loadedGameAssets = loaded;
                const progress = (loaded / total) * 100;
                loadingProgress.textContent = `Loading game assets: ${Math.round(progress)}%`;
            }

            const chapters = document.querySelectorAll(".loading-screen");
            const mainMenu = document.getElementById("main-menu");
            const gameContent = document.getElementById("game-content");
            let currentChapter = 0;

            function updateLoadingProgress(chapter, progress) {
                const loadingBar =
                    chapters[chapter].querySelector(".loading-bar");
                const loadingText =
                    chapters[chapter].querySelector(".loading-text");

                loadingBar.style.width = `${progress}%`;
                loadingText.textContent = `Loading Chapter ${chapter + 1}... ${Math.round(progress)}%`;

                if (progress >= 100) {
                    if (chapter < chapters.length - 1) {
                        setTimeout(() => {
                            chapters[chapter].classList.remove("active");
                            chapters[chapter + 1].classList.add("active");
                            currentChapter++;
                            startChapterLoading(currentChapter);
                        }, 2000);
                    } else {
                        setTimeout(() => {
                            chapters[chapter].classList.remove("active");
                            mainMenu.style.display = "flex";
                        }, 2000);
                    }
                }
            }

            function startChapterLoading(chapter) {
                let progress = 0;
                const interval = setInterval(() => {
                    progress += Math.random() * 15;
                    if (progress > 100) {
                        progress = 100;
                        clearInterval(interval);
                    }
                    updateLoadingProgress(chapter, progress);
                }, 500);
            }

            window.startGame = function () {
                mainMenu.style.display = "none";
                gameContent.style.display = "block";
                // Your game initialization code here
            };

            // Start the first chapter loading
            startChapterLoading(0);
        </script>
    </body>
</html>
